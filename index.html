<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wright‚Äôs Carnival Calculator</title>
  <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
        margin: 1em;
        padding: 0;
        background: #fefefe;
        font-size: 1rem;
      }
      h1, h2, h3 {
        font-size: 1.2em;
        margin-top: 1em;
        margin-bottom: 0.5em;
      }
      .section {
        background: #fff;
        padding: 1em;
        border-radius: 0.5em;
        box-shadow: 0 1px 4px rgba(0,0,0,0.1);
        margin-bottom: 1.5em;
      }
      label {
        display: block;
        margin-bottom: 0.8em;
        font-weight: 500;
      }
      input[type="number"],
      select {
        width: 100%;
        padding: 0.6em;
        font-size: 1em;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      button {
        width: 100%;
        padding: 1em;
        font-size: 1em;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 0.4em;
        margin-top: 1em;
      }
      button:hover {
        background-color: #0056b3;
      }
      #totalOutput {
        font-size: 1.4em;
        font-weight: bold;
        display: inline-block;
        margin-top: 0.5em;
      }
    </style>
</head>
<body>
  <h1>üé™ Wright‚Äôs Carnival Calculator</h1>

  <div class="section">
    <h2>üéüÔ∏è Ticket Options</h2>
    <label>Single Tickets ($1 each): <input type="number" id="singleTickets" min="0" value="0"></label><br>
    <label>Unlimited Armbands ($40 each): <input type="number" id="armbands" min="0" value="0"></label>
  </div>

  <div class="section">
    <h3>Special Offers</h3>
    <label><input type="checkbox" id="discountCheck"> ü•´ Discount Armband ($25)</label>
    <input type="number" id="discountArmbands" min="0" value="0" disabled><br>
    <label><input type="checkbox" id="familyCheck"> üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Pack ($100 for 4 armbands)</label>
    <input type="number" id="familyPacks" min="0" value="0" disabled>
  </div>

  <div class="section">
    <h3>üßæ Tax Location</h3>
    <label for="locationSelect">Select Location:
      <select id="locationSelect">
        <option value="">-- Choose a location --</option>
        <option value="8.25">College Station, TX</option>
<option value="8.25">San Angelo, TX</option>
<option value="8.25">Midland, TX</option>
<option value="8.25">Sweetwater, TX</option>
<option value="6.875">Hobbs, NM</option>
<option value="8.00">Aurora, CO</option>
<option value="7.27">Grand Junction, CO</option>
<option value="8.75">Northglenn, CO</option>
<option value="7.01">Greeley, CO</option>
<option value="8.20">Colorado Springs, CO</option>
<option value="8.00">Parker, CO</option>
<option value="7.90">Monte Vista, CO</option>
<option value="6.5625">Carlsbad, NM</option>
<option value="7.65">Artesia, NM</option>
<option value="6.875">Lovington, NM</option>
<option value="7.4375">Clovis, NM</option>
<option value="8.25">Odessa, TX</option>
<option value="8.25">Big Springs, TX</option>
<option value="7.3125">Roswell - Downtown, NM</option>
<option value="7.125">Roswell - North, NM</option>
<option value="7.25">Roswell - South, NM</option>
      </select>
    </label>
    <p id="taxRateDisplay">Tax Rate: <span id="taxRate">0%</span></p>
  </div>

  <div class="section">
    <button onclick="calculateTotal()">Calculate Total</button>
    <h2>Total: $<span id="totalOutput">0.00</span></h2>
  </div>

  <script>
    const taxRateEl = document.getElementById("taxRate");
    const locationSelect = document.getElementById("locationSelect");
    let lockedTaxRate = null;

    locationSelect.addEventListener("change", function() {
      const rate = parseFloat(this.value);
      if (!this.value) {
        lockedTaxRate = null;
        taxRateEl.textContent = "0%";
        return;
      }
      if (lockedTaxRate !== null) {
        alert("Tax rate already confirmed and locked.");
        locationSelect.disabled = true;
        return;
      }
      if (confirm(`Apply tax rate of ${rate}% for this location?`)) {
        lockedTaxRate = rate;
        taxRateEl.textContent = `${rate}%`;
        locationSelect.disabled = true;
      } else {
        this.value = "";
        taxRateEl.textContent = "0%";
      }
    });

    document.getElementById("discountCheck").addEventListener("change", function() {
      document.getElementById("discountArmbands").disabled = !this.checked;
    });
    document.getElementById("familyCheck").addEventListener("change", function() {
      document.getElementById("familyPacks").disabled = !this.checked;
    });

    function calculateTotal() {
      const singles = +document.getElementById("singleTickets").value;
      const armbands = +document.getElementById("armbands").value;
      const discount = document.getElementById("discountCheck").checked ? +document.getElementById("discountArmbands").value : 0;
      const families = document.getElementById("familyCheck").checked ? +document.getElementById("familyPacks").value : 0;
      const taxRate = lockedTaxRate || 0;

      const subtotal = singles * 1 + armbands * 40 + discount * 25 + families * 100;
      const tax = subtotal * (taxRate / 100);
      const total = subtotal + tax;

      document.getElementById("totalOutput").textContent = total.toFixed(2);
      const cashGiven = parseFloat(document.getElementById("cashGiven").value || 0);
      const change = cashGiven - total;
      document.getElementById("changeDue").textContent = change >= 0 ? change.toFixed(2) : "0.00";
      const breakdownEl = document.getElementById("changeBreakdown");
      breakdownEl.innerHTML = "";
      let remaining = Math.max(0, change);
      const denominations = [
  { name: "$100", value: 100.0, emoji: "üíµ" },
  { name: "$50", value: 50.0, emoji: "üíµ" },
  { name: "$20", value: 20.0, emoji: "üíµ" },
  { name: "$10", value: 10.0, emoji: "üíµ" },
  { name: "$5", value: 5.0, emoji: "üíµ" },
  { name: "$1", value: 1.0, emoji: "üíµ" },
  { name: "50¬¢", value: 0.5, emoji: "ü™ô" },
  { name: "25¬¢", value: 0.25, emoji: "ü™ô" },
  { name: "10¬¢", value: 0.1, emoji: "ü™ô" },
  { name: "5¬¢", value: 0.05, emoji: "ü™ô" },
  { name: "1¬¢", value: 0.01, emoji: "ü™ô" }
];
      for (const d of denominations) {
        const count = Math.floor(remaining / d.value);
        if (count > 0) {
          breakdownEl.innerHTML += `<li>${d.emoji} ${count} √ó ${d.name}</li>`;
          remaining = (remaining - count * d.value + 0.00001); // rounding fix
        }
      }

    }
  </script>
  <div class="section">
    <h3>üíµ Cash Received</h3>
    <label>Enter Cash Given by Customer ($):
      <input type="number" id="cashGiven" min="0" step="0.01" placeholder="e.g. 100">
    </label>
    <h2>Change Due: $<span id="changeDue">0.00</span></h2>
  </div>
  <div class="section">
    <h3>ü™ô Change Breakdown</h3>
    <ul id="changeBreakdown" style="list-style: none; padding-left: 0;"></ul>
  </div>

</body>
</html>

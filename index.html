<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Wright‚Äôs Carnival Calculator</title>
  <style>
    body { font-family: sans-serif; margin: 2em; }
    .section { margin-bottom: 1.5em; }
    fieldset { margin-top: 1em; }
    input[type='number'] { width: 60px; }
    input[disabled] { background-color: #eee; }
    select { padding: 0.3em; }
  </style>
</head>
<body>
  <h1>üé™ Wright‚Äôs Carnival Calculator</h1>

  <div class="section">
    <h2>üéüÔ∏è Ticket Options</h2>
    <label>Single Tickets ($1 each): <input type="number" id="singleTickets" min="0" value="0"></label><br>
    <label>Unlimited Armbands ($40 each): <input type="number" id="armbands" min="0" value="0"></label>
  </div>

  <div class="section">
    <h3>Special Offers</h3>
    <label><input type="checkbox" id="discountCheck"> ü•´ Discount Armband ($25)</label>
    <input type="number" id="discountArmbands" min="0" value="0" disabled><br>
    <label><input type="checkbox" id="familyCheck"> üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Family Pack ($100 for 4 armbands)</label>
    <input type="number" id="familyPacks" min="0" value="0" disabled>
  </div>

  <div class="section">
    <h3>üßæ Tax Location</h3>
    <label for="locationSelect">Select Location:
      <select id="locationSelect">
        <option value="">-- Choose a location --</option>
        <option value="8.25">College Station, TX</option>
<option value="8.25">San Angelo, TX</option>
<option value="8.25">Midland, TX</option>
<option value="8.25">Sweetwater, TX</option>
<option value="6.875">Hobbs, NM</option>
<option value="8.00">Aurora, CO</option>
<option value="7.27">Grand Junction, CO</option>
<option value="8.75">Northglenn, CO</option>
<option value="7.01">Greeley, CO</option>
<option value="8.20">Colorado Springs, CO</option>
<option value="8.00">Parker, CO</option>
<option value="7.90">Monte Vista, CO</option>
<option value="6.5625">Carlsbad, NM</option>
<option value="7.65">Artesia, NM</option>
<option value="6.875">Lovington, NM</option>
<option value="7.4375">Clovis, NM</option>
<option value="8.25">Odessa, TX</option>
<option value="8.25">Big Springs, TX</option>
<option value="7.3125">Roswell - Downtown, NM</option>
<option value="7.125">Roswell - North, NM</option>
<option value="7.25">Roswell - South, NM</option>
      </select>
    </label>
    <p id="taxRateDisplay">Tax Rate: <span id="taxRate">0%</span></p>
  </div>

  <div class="section">
    <button onclick="calculateTotal()">Calculate Total</button>
    <h2>Total: $<span id="totalOutput">0.00</span></h2>
  </div>

  <script>
    const taxRateEl = document.getElementById("taxRate");
    const locationSelect = document.getElementById("locationSelect");
    let lockedTaxRate = null;

    locationSelect.addEventListener("change", function() {
      const rate = parseFloat(this.value);
      if (!this.value) {
        lockedTaxRate = null;
        taxRateEl.textContent = "0%";
        return;
      }
      if (lockedTaxRate !== null) {
        alert("Tax rate already confirmed and locked.");
        locationSelect.disabled = true;
        return;
      }
      if (confirm(`Apply tax rate of ${rate}% for this location?`)) {
        lockedTaxRate = rate;
        taxRateEl.textContent = `${rate}%`;
        locationSelect.disabled = true;
      } else {
        this.value = "";
        taxRateEl.textContent = "0%";
      }
    });

    document.getElementById("discountCheck").addEventListener("change", function() {
      document.getElementById("discountArmbands").disabled = !this.checked;
    });
    document.getElementById("familyCheck").addEventListener("change", function() {
      document.getElementById("familyPacks").disabled = !this.checked;
    });

    function calculateTotal() {
      const singles = +document.getElementById("singleTickets").value;
      const armbands = +document.getElementById("armbands").value;
      const discount = document.getElementById("discountCheck").checked ? +document.getElementById("discountArmbands").value : 0;
      const families = document.getElementById("familyCheck").checked ? +document.getElementById("familyPacks").value : 0;
      const taxRate = lockedTaxRate || 0;

      const subtotal = singles * 1 + armbands * 40 + discount * 25 + families * 100;
      const tax = subtotal * (taxRate / 100);
      const total = subtotal + tax;

      document.getElementById("totalOutput").textContent = total.toFixed(2);
    }
  </script>
</body>
</html>
